import {Route, IndexRedirect} from 'react-router';
import {connect} from 'react-redux'
import React from 'react';
import Admin from 'containers/addBooks'
import {getUserIsAdmin} from '../../node_modules/userSelector'



const requireAuth = (nextState, replace, cb) => {
    if (getUserIsAdmin(store.getState())) {
        console.log("I am admin");
        replace({
            pathname: '/admin'
        });
    }
    cb();
}

let store;

export default function routes(storeRef) {
    store = storeRef;
    return (
        <Route>
            <Route path='/admin' component={Admin} onEnter={requireAuth}/>
        </Route>
    );
}
